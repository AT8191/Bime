<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>فرم بیمه</title>
<style>
    body {
        font-family: Tahoma, sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding-top: 80px;
        text-align: center;
    }
    header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #ffffff;
        box-shadow: 0 0 10px rgba(0,0,0,0.08);
        padding: 10px;
        z-index: 1000;
        display: flex;
        justify-content: center;
        gap: 8px;
        flex-wrap: wrap;
    }
    .btn {
        background: #007bff;
        color: #fff;
        padding: 10px 18px;
        margin: 4px;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        font-size: 14px;
        transition: background .15s;
    }
    .btn:hover { background: #0056b3; }

    .form-box {
        display: none;
        background: #e6f0ff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.06);
        width: 360px;
        margin: 26px auto;
        animation: fadeIn .4s ease-in-out;
        text-align: right;
    }
    .form-group { margin-bottom: 14px; }
    input, textarea, select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccd6ee;
        border-radius: 8px;
        font-size: 14px;
        box-sizing: border-box;
    }
    textarea { min-height: 90px; resize: vertical; }
    .hint { font-size: 13px; color: #555; margin-top: 6px; }

    .send {
        background: #007bff;
        color: #fff;
        padding: 11px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        width: 100%;
        font-size: 15px;
    }
    .send:hover { background: #0056b3; }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-8px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width:420px){
      .form-box { width: calc(100% - 40px); margin: 14px; padding: 16px; }
      .btn { padding: 8px 12px; font-size:13px; }
    }
</style>
</head>
<body>

<header>
    <button class="btn" onclick="showForm('بیمه شخص ثالث')">شخص ثالث</button>
    <button class="btn" onclick="showForm('بیمه بدنه')">بدنه</button>
    <button class="btn" onclick="showForm('بیمه مسئولیت')">مسئولیت</button>
    <button class="btn" onclick="showForm('بیمه تکمیل درمان')">تکمیل درمان</button>
</header>

<div id="insurance-form" class="form-box" role="form" aria-labelledby="form-title">
    <h3 id="form-title" style="margin-top:0;"></h3>
    <div id="dynamic-fields"></div>
    <div class="form-group">
        <input type="text" id="name" placeholder="نام شما" autocomplete="name" required>
    </div>
    <div class="form-group">
        <input type="tel" id="phone" placeholder="شماره شما (مثال: 09123456789)" autocomplete="tel" required>
    </div>
    <div class="form-group">
        <textarea id="description" placeholder="توضیحات (دلخواه)"></textarea>
    </div>
    <button class="send" onclick="sendToWhatsApp()">ارسال به واتساپ</button>
    <p class="hint">پس از زدن ارسال، واتساپ باز می‌شود؛ روی ارسال کلیک کنید.</p>
</div>

<script>
const WHATSAPP_NUMBER = '989171912114';
let selectedInsurance = '';

function showForm(type) {
    selectedInsurance = type;
    document.getElementById('form-title').innerText = type;
    const dynamicFields = document.getElementById('dynamic-fields');
    dynamicFields.innerHTML = '';

    if (type === 'بیمه شخص ثالث' || type === 'بیمه بدنه') {
        dynamicFields.innerHTML = `
            <div class="form-group">
                <select id="vehicleType">
                    <option value="">نوع خودرو</option>
                    <option>سواری</option>
                    <option>وانت</option>
                    <option>کامیونت</option>
                    <option>کامیون</option>
                    <option>غیر متعارف</option>
                </select>
            </div>
            <div class="form-group">
                <select id="carSelect">
                    <option value="">انتخاب خودرو</option>
                    <option>پژو 206</option>
                    <option>پژو پارس</option>
                    <option>پژو 405</option>
                    <option>سمند</option>
                    <option>تیبا</option>
                    <option>پراید 131</option>
                    <option>دنا پلاس</option>
                    <option>هیوندای النترا</option>
                    <option>کیا سراتو</option>
                    <option>تویوتا کرولا</option>
                    <option>BMW 320i</option>
                    <option>Mercedes C200</option>
                    <option value="other">خودروی دیگر</option>
                </select>
                <input type="text" id="customCar" placeholder="نام خودرو" style="display:none; margin-top:10px;">
            </div>
            <div class="form-group">
                <select id="colorSelect">
                    <option value="">رنگ خودرو</option>
                    <option>سفید</option>
                    <option>مشکی</option>
                    <option>نقره‌ای</option>
                    <option>خاکستری</option>
                    <option>قرمز</option>
                    <option>آبی</option>
                    <option>سبز</option>
                    <option>زرد</option>
                    <option>طلایی</option>
                    <option>بنفش</option>
                    <option>صورتی</option>
                    <option>نارنجی</option>
                    <option>قهوه‌ای</option>
                    <option>کرم</option>
                    <option value="other_color">رنگ دیگر</option>
                </select>
                <input type="text" id="customColor" placeholder="نام رنگ" style="display:none; margin-top:10px;">
            </div>
        `;
        setTimeout(() => {
            document.getElementById('carSelect').addEventListener('change', e => {
                document.getElementById('customCar').style.display = e.target.value === 'other' ? 'block' : 'none';
            });
            document.getElementById('colorSelect').addEventListener('change', e => {
                document.getElementById('customColor').style.display = e.target.value === 'other_color' ? 'block' : 'none';
            });
        }, 0);

    } else if (type === 'بیمه مسئولیت') {
        dynamicFields.innerHTML = `
            <div class="form-group">
                <input type="text" id="job" placeholder="شغل">
            </div>
            <div class="form-group">
                <input type="text" id="workPlace" placeholder="محل فعالیت">
            </div>
        `;
    } else if (type === 'بیمه تکمیل درمان') {
        dynamicFields.innerHTML = `
            <div class="form-group">
                <input type="text" id="insuranceCompany" placeholder="بیمه‌گر قبلی">
            </div>
            <div class="form-group">
                <input type="number" id="familyCount" placeholder="تعداد اعضا">
            </div>
            <div class="form-group">
                <input type="text" id="history" placeholder="سابقه بیمه">
            </div>
        `;
    }
    document.getElementById('insurance-form').style.display = 'block';
    setTimeout(()=> document.getElementById('insurance-form').scrollIntoView({behavior:'smooth'}), 150);
}

function sendToWhatsApp(){
    if (!selectedInsurance) return alert('نوع بیمه را انتخاب کنید');
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    if (!name || !phone) return alert('نام و شماره را وارد کنید');
    const description = document.getElementById('description').value.trim();

    let extraLines = '';
    if (selectedInsurance === 'بیمه شخص ثالث' || selectedInsurance === 'بیمه بدنه') {
        const vehicleType = document.getElementById('vehicleType').value || '';
        const car = document.getElementById('carSelect').value === 'other' ? document.getElementById('customCar').value : document.getElementById('carSelect').value;
        const color = document.getElementById('colorSelect').value === 'other_color' ? document.getElementById('customColor').value : document.getElementById('colorSelect').value;
        if (vehicleType) extraLines += `نوع خودرو: ${vehicleType}\n`;
        if (car) extraLines += `خودرو: ${car}\n`;
        if (color) extraLines += `رنگ: ${color}\n`;
    } else if (selectedInsurance === 'بیمه مسئولیت') {
        const job = document.getElementById('job').value || '';
        const workPlace = document.getElementById('workPlace').value || '';
        if (job) extraLines += `شغل: ${job}\n`;
        if (workPlace) extraLines += `محل فعالیت: ${workPlace}\n`;
    } else if (selectedInsurance === 'بیمه تکمیل درمان') {
        const prev = document.getElementById('insuranceCompany').value || '';
        const fam = document.getElementById('familyCount').value || '';
        const hist = document.getElementById('history').value || '';
        if (prev) extraLines += `بیمه‌گر قبلی: ${prev}\n`;
        if (fam) extraLines += `تعداد اعضا: ${fam}\n`;
        if (hist) extraLines += `سابقه بیمه: ${hist}\n`;
    }

    const message = encodeURIComponent(`درخواست مشاوره بیمه\nنوع بیمه: ${selectedInsurance}\n${extraLines}نام: ${name}\nشماره: ${phone}\n\nتوضیحات:\n${description || '-'}`);
    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${message}`, '_blank');
}
</script>

</body>
</html>
